<!-- declaration defining this document is an HTML5 document, only appears once at top of each HTML page, does not have a closing tag -->
<!doctype html>

<!-- <html> is the root element of an HTML page -->
<!-- class no-js is a fallback that indicates that JavaScript is not supported or has not yet been loaded -->
<!-- lang attribute defines the document language and en simply stands for English -->
<html class="no-js" lang="en">

<!-- <head> is the container for the following elements: <title>, <style>, <meta>, <link>, <script>, <base> -->
<!-- <head> contains all metadata (data about data) -->
<head>

  <!-- utf-8 is a character encoding system allowing characters to be represented by ASCII text -->
  <meta charset="utf-8">

  <!-- The title of this document and is shown in the broswer tab -->
  <title>Mr Jason Code : Recent X Posts</title>

  <!-- Describes the content on this webpage -->
  <meta name="description" content="My first personal website.">

  <!-- define keywords and phrases on this webpage -->
  <meta name="keywords" content="Jason Weimer, Bangkok Thailand, Applied Technologies, ICS">

  <!-- setting the viewport default to make the website look good on all devices -->
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- og means "Open Graph", this information is used in social media postings -->
  <meta property="og:title" content="">
  <meta property="og:type" content="">
  <meta property="og:url" content="">
  <meta property="og:image" content="">

  <link rel="apple-touch-icon" href="icon.png">
  <!-- Place favicon.ico in the root directory -->

  <!-- CSS stylesheet from outside third party source here ( https://cdnjs.com/libraries/font-awesome ) -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer"/>

  <!-- CSS stylesheet used to set defaults and normalize generic styles ** DO NOT CHANGE ** -->
  <link rel="stylesheet" href="css/normalize.css">

  <!-- CSS stylesheet that can be customized for this webiste -->
  <link rel="stylesheet" href="css/main.css">

  <!-- Used by some browsers to adjust the color of the address bar and/or other UI elements -->
  <meta name="theme-color" content="#fafafa">

  <style>
    #x-posts {background: rgba(255, 255, 255, 0.1); padding: 15px; border-radius: 5px;}
    .post {margin: 10px 0; padding: 10px; border-radius: 3px; background: rgba(255, 255, 255, 0.1);}
    .post:hover {transform: scale(1.02); transition: transform 0.2s;}
    .post p {font-family: 'Cormorant Garamond', serif; font-size: 1.5rem; line-height: 1.5; margin: 0;}
    .post a {color: coral; text-decoration: none;}
    #loading {text-align: center; color: #999999;}
    .error {color: #ffffff; text-align: center;}
    #search-container {margin-bottom: 15px; text-align: center;}
    input, button {padding: 5px; margin: 5px;}
    .left {text-align: left;}
  </style>

</head>

<body>

  <header>
    <!-- Responsive top horizontal navigation bar -->
    <div class="navbar">
      <div class="logo"><a href="https://www.mrjasoncode.com/">MR JASON CODE</a></div>
      <ul class="links">
        <li><a href="about">ABOUT</a></li>
        <li><a href="studentwork">STUDENT WORK</a></li>
        <li><a href="thesandbox">THE SANDBOX</a></li>
        <li><a href="smartypants">SMARTY PANTS</a></li>
      </ul>
      <a href="mailto:jason_w@ics.ac.th?subject=Mr Jason Code Contact" class="action_btn">CONTACT</a>
      <div class="toggle_btn">
        <i class="fa-solid fa-bars"></i>
      </div>
    </div>

    <!-- Responsive top dropdown menu -->
    <div class="dropdown_menu">
      <li><a href="about">ABOUT</a></li>
      <li><a href="studentwork">STUDENT WORK</a></li>
      <li><a href="thesandbox">THE SANDBOX</a></li>
      <li><a href="smartypants">SMARTY PANTS</a></li>
      <li><a href="mailto:jason_w@ics.ac.th?subject=Mr Jason Code Contact" class="action_btn">CONTACT</a></li>
    </div>
  </header>

  <!-- Add webpage content here -->
  <main>
    <section id="subpage" class="center">
      <h2>Latest X Posts</h2>
      <hr width=200px>

      <!-- Dynamic X Posts from @jasonweimer X account -->

      <section id="x-posts">
        <!-- <div id="search-container">
          <input type="text" id="search" placeholder="Search topics (e.g., coding)">
          <button onclick="fetchPosts(true)">Search</button>
          <button onclick="fetchPosts(false)">My Posts</button>
        </div> -->
        <div id="loading">Loading...</div>
        <div id="posts-container" class="left"></div>
        <div id="error-message" class="error" style="display: none;"></div>
      </section>
      <script>
    // Your static tweets (replace with your real posts)
    const staticPosts = {
  data: [
    { text: "What’s a simple change you made that had a huge impact on your work? A tool, a habit, or a mindset shift. Drop yours in the replies below." },
    { text: "Whitespace isn’t empty space. It’s what makes everything else readable. Next time you’re designing, remove an element instead of adding one. See what happens." },
    { text: "If people don’t trust your brand, they won’t buy from you. Trust isn’t built through flashy marketing. It comes from consistency, clarity, and follow-through. Say what you do. Do what you say." },
    { text: "Great ideas don’t come from staring at a blank screen. They come from doing the work. Start with something rough, then shape it into something real." },
    { text: "I used to overthink launching new ideas. The best ones came from testing early and adjusting fast. If you're waiting for perfect, you’re already behind." },
    { text: "Good UX isn’t just about how something looks. It’s about how it works. Use Jakob’s Law, people expect your product to work like others they already know. Fight that expectation, and you’ll lose them." },
    { text: "A clean design isn’t about what you add. It’s about what you remove. If everything is important, nothing is." },
    { text: "The best UI is the one people don’t think about. To test clarity, watch someone use your design without explaining it. Where they pause, struggle, or hesitate is where you need to fix friction." },
    { text: "People say to work smarter, not harder, but smart work is built on disciplined effort. You don’t get efficiency without putting in the reps first. Master the skill, then streamline." },
    { text: "What’s a skill you learned that completely changed how you approach work? Could be a technique, a mindset shift, or even a tool." }
  ]
};

    function processPostText(text) {
      let cleanedText = text.replace(/#\w+/g, '');
      cleanedText = cleanedText.replace(/(https?:\/\/[^\s]+)/g, '<a href="$1" target="_blank">$1</a>');
      cleanedText = cleanedText.replace(/\s+/g, ' ').trim();
      return cleanedText;
    }

    async function fetchPosts(useSearch = false, attempt = 1, maxAttempts = 3) {
      const query = useSearch ? document.getElementById('search').value : '';
      const url = query
        ? `https://x-api-proxy.vercel.app/api/tweets?q=${encodeURIComponent(query)}`
        : 'https://x-api-proxy.vercel.app/api/tweets';
      
      try {
        const response = await fetch(url);
        if (!response.ok) {
          if (response.status === 429 && attempt < maxAttempts) {
            const delay = Math.min(attempt * 15 * 1000, 15 * 60 * 1000);
            await new Promise(resolve => setTimeout(resolve, delay));
            return fetchPosts(useSearch, attempt + 1, maxAttempts);
          }
          throw new Error(`HTTP error! Status: ${response.status}`);
        }
        const data = await response.json();
        displayPosts(data);
      } catch (error) {
        const loading = document.getElementById('loading');
        const errorDiv = document.getElementById('error-message');
        loading.style.display = 'none';
        
        if (error.message.includes('429') || error.message.includes('500')) {
          displayPosts(staticPosts);
          errorDiv.style.display = 'block';
          errorDiv.textContent = 'Using cached posts due to server issues or rate limits. Live updates resume soon.';
        } else {
          errorDiv.style.display = 'block';
          errorDiv.textContent = `Failed to load X posts: ${error.message}`;
          console.error('Fetch Error:', error);
        }
      }
    }

    function displayPosts(data) {
      const loading = document.getElementById('loading');
      const container = document.getElementById('posts-container');
      loading.style.display = 'none';
      
      if (data.data && data.data.length > 0) {
        container.innerHTML = '';
        data.data.forEach(post => {
          const postElement = document.createElement('div');
          postElement.className = 'post';
          const pElement = document.createElement('p');
          pElement.innerHTML = processPostText(post.text);
          postElement.appendChild(pElement);
          container.appendChild(postElement);
        });
      } else {
        container.innerHTML = '<p class="error">No posts found.</p>';
      }
    }

    fetchPosts(false); // Load @jasonweimer's 10 posts
  </script>

      <!-- Dynamic X Posts from @jasonweimer X account -->

      <hr width=200px>
      <a href="https://www.mrjasoncode.com/" class="action_btn">HOME</a>
      <br />
      <br />
    </section>
  </main>

  <!-- JavaScript code that shows and hides responsive dropdown navigation -->
  <script>
    const toggleBtn = document.querySelector('.toggle_btn')
    const toggleBtnIcon = document.querySelector('.toggle_btn i')
    const dropDownMenu = document.querySelector('.dropdown_menu')

    toggleBtn.onclick = function() {
      dropDownMenu.classList.toggle('open')
      const isOpen = dropDownMenu.classList.contains('open')

      toggleBtnIcon.classList = isOpen
      ? 'fa-solid fa-xmark'
      : 'fa-solid fa-bars'
    }
  </script>

  <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-3556JR0X75"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-3556JR0X75');
</script>

</body>

</html>
